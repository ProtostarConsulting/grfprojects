<div ng-if="loading">
	<div layout="row" layout-sm="column" layout-align="space-around">
		<md-progress-circular md-diameter="100" md-mode="indeterminate"></md-progress-circular>
	</div>
</div>
<div ng-if="!loading">
	<div layout-sm="column" layout-align="start start" flex>

		<!-- <md-button class="md-icon-button" aria-label="prev" ng-click="back()">
	<md-tooltip> go back </md-tooltip> <md-icon
		md-svg-icon="img/icons/ic_reply_black_24px.svg" aria-label="Prev Week"></md-icon>
	</md-button> -->

	</div>
	<section ng-hide="curUser.role == 'Teacher'"
		ng-show="selectedPSchoolId" layout="row" layout-align="end end" flex>
		<md-button class="md-raised md-primary" id="resetState"
			ng-click="resetState()">Add New School</md-button>
	</section>

	<h3 class="md-headline" ng-hide="selectedPSchoolId">
		Add School <span ng-show="partnerSchool.autoGenerated"><font
			size="2">(GRF No:{{partnerSchool.autoGenerated}},
				School/College:{{partnerSchool.schoolName}})</font></span>
	</h3>

	<h3 class="md-headline" ng-show="selectedPSchoolId">
		Edit School <font size="2">(GRF
			Number:{{partnerSchool.autoGenerated}} School Name
			:{{partnerSchool.schoolName}})</font>
	</h3>
	<form name="partnerSchoolForm">
		<div ng-init="setForm(partnerSchoolForm);"></div>
		<md-content> <md-tabs md-dynamic-height=""
			md-border-bottom="" md-selected="selectedIndex"> <md-tab
			label="School Detail" ng-click="setCurrentTab(0)"> <md-content
			class="md-padding">
		<div layout="column" layout-xs="column">

			<div layout="row" layout-xs="column" flex>
				<!-- <span flex="10"></span> -->
				<md-input-container flex><!-- ng-show="selectedPSchoolId" -->
				<label> GRF Reg.No.</label> <input name="name"
					ng-model="partnerSchool.autoGenerated" disabled> </md-input-container>
				<!-- 	<span flex="20" ng-show="selectedPSchoolId"></span> -->

				<md-input-container flex> <label>Enter
					Govt.Reg.No<!-- <span style="color: red"
				ng-show="partnerSchoolForm.govRegisterno.$error.required"
				class="mandatory">*</span> -->
				</label> <input name="govRegisterno" ng-model="partnerSchool.govRegisterno"
					focus-on="!selectedPSchoolId && selectedIndex==0"> </md-input-container>
			</div>
			<div layout="row" layout-xs="column" flex>
				<md-input-container flex> <label>School/College
					Name<span style="color: red"
					ng-show="partnerSchoolForm.name.$error.required" class="mandatory">*</span>
				</label> <input name="name" ng-model="partnerSchool.schoolName"
					ng-required="true">
				<div ng-messages="partnerSchoolForm.name.$error"
					ng-if="partnerSchoolForm.name.$submitted || partnerSchoolForm.name.$touched">
					<div ng-message="required">Please Enter Institute Name.</div>
				</div>
				</md-input-container>

				<!-- <md-input-container flex> <label>Institute
					Name </label> <input name="instName" ng-model="partnerSchool.instName"></md-input-container> -->
				<md-input-container flex> <label>Institute
					Name</label> <md-select name="schoolInstitute" id="schoolInstitute"
					ng-model="partnerSchool.schoolInstitute"> <md-option
					ng-value="tempInstitute"
					ng-selected="partnerSchool.schoolInstitute.id == tempInstitute.id"
					ng-repeat="tempInstitute in tempInstituteList">{{tempInstitute.instituteName}}</md-option>
				</md-select> </md-input-container>
			</div>

			<div layout="row" layout-xs="column" flex>

				<md-input-container flex> <label>Category<span
					style="color: red"
					ng-show="partnerSchoolForm.category.$error.required"
					class="mandatory">*</span></label> <md-select name="category" id="category"
					ng-model="partnerSchool.category" ng-required="true"> <md-option
					ng-value="category" ng-repeat="category in partnerSchoolLevels">{{category}}</md-option>
				</md-select>
				<div ng-messages="partnerSchoolForm.category.$error"
					ng-if="partnerSchoolForm.category.$submitted || partnerSchoolForm.category.$touched">
					<div ng-message="required">Please Select Category.</div>
				</div>
				</md-input-container>

				<md-input-container flex> <label> Form
					Number <!-- <span style="color: red"
				ng-show="partnerSchoolForm.formNumber.$error.required"
				class="mandatory">*</span> -->
				</label> <input type="number" name="formNumber"
					ng-model="partnerSchool.formNumber"
					unique-grf-form-number="{{partnerSchool.id}}" minlength="4">
				<div ng-messages="partnerSchoolForm.formNumber.$error"
					ng-if="partnerSchoolForm.formNumber.$submitted || partnerSchoolForm.formNumber.$touched">
					<div ng-message="uniqueGRFFormNumber">This form number
						already entered. Please check existing records.</div>
					<span ng-message="minlength">Minimum length should be 4
						digits.</span>
					<div ng-if="profileForm.favoriteNumber.$pending">
						     Calculating....</div>
				</div>
				</md-input-container>

			</div>

			<div layout="row" layout-xs="column" flex>
				<!-- <span flex="10"></span> -->
				<h3 class="md-subhead">Address</h3>
			</div>
			<div layout="row" layout-xs="column">
				<md-input-container flex> <label>Line1
				</label> <input name="line1" id="line1"
					ng-model="partnerSchool.address.line1"> </md-input-container>
				<md-input-container flex> <label>Line2
				</label> <input name="line2" id="line2"
					ng-model="partnerSchool.address.line2"></md-input-container>
			</div>

			<div layout="row" layout-xs="column">
				<md-input-container flex> <label>At
					Post/City </label> <input name="city" id="city"
					ng-model="partnerSchool.address.city"> </md-input-container>

				<md-input-container flex> <label>State</label>
				<md-select name="state" ng-model="partnerSchool.address.state"
					ng-change="getDistricts($index, partnerSchool.address.state)">
				<md-option ng-value="states.name"
					ng-selected="partnerSchool.address.state == states.name"
					ng-repeat="states in Country.states |  orderBy : states.name">{{states.name}}</md-option>
				</md-select> </md-input-container>
			</div>

			<div layout="row" layout-xs="column"
				ng-if="partnerSchool.address.state == 'Other'">
				<md-input-container flex> <label>State
				</label> <input name="otherState" id="otherState"
					ng-model="partnerSchool.address.otherState"> </md-input-container>

				<md-input-container flex> <label>District
				</label> <input name="otherDist" id="otherDist"
					ng-model="partnerSchool.address.otherDist"> </md-input-container>
			</div>
			<div layout="row" layout-xs="column"
				ng-if="partnerSchool.address.state == 'Other'">
				<md-input-container flex> <label>Taluka
				</label> <input name="otherTaluka" id="otherTaluka"
					ng-model="partnerSchool.address.otherTaluka"> </md-input-container>


				<md-input-container flex="50"> <label>Pin
				</label> <input type="number" name="pin" id="pin"
					ng-model="partnerSchool.address.pin"> </md-input-container>
			</div>


			<div layout="row" layout-xs="column"
				ng-if="partnerSchool.address.state != 'Other'">
				<md-input-container flex> <label>District</label>
				<md-select name="district" ng-model="partnerSchool.address.dist"
					ng-change="getTalukas($index, partnerSchool.address.dist)">
				<md-option ng-value="district.name"
					ng-selected="partnerSchool.address.dist == district.name"
					ng-repeat="district in temp.tempDistricts">{{district.name
				}}</md-option> </md-select> </md-input-container>

				<md-input-container flex> <label>Taluka</label>
				<md-select name="taluka" ng-model="partnerSchool.address.tal"
					ng-change="getVillages($Index, partnerSchool.address.tal)">
				<md-option ng-value="taluka.name"
					ng-selected="partnerSchool.address.tal == taluka.name"
					ng-repeat="taluka in temp.tempTalukas">{{taluka.name }}</md-option>
				</md-select> </md-input-container>
			</div>


			<div layout="row" layout-xs="column">
				<md-input-container flex="50"
					ng-if="partnerSchool.address.state != 'Other'">
				<label>Pin </label> <input type="number" name="pin" id="pin"
					ng-model="partnerSchool.address.pin"> </md-input-container>
			</div>
		</div>

		<section layout="row" layout-sm="column" layout-align="end end">
			<md-button class="md-raised md-primary" ng-click="addPartnerSchool()"
				ng-disabled="partnerSchoolForm.name.$invalid || partnerSchoolForm.category.$invalid || partnerSchoolForm.formNumber.$invalid 
				|| partnerSchoolForm.line1.$invalid ||partnerSchoolForm.city.$invalid || partnerSchoolForm.state.$invalid  
				|| partnerSchoolForm.dist.$invalid || partnerSchoolForm.taluka.$invalid || partnerSchoolForm.pin.$invalid ||!visible">Save
			& Next</md-button>
			<md-button class="md-raised md-primary" ng-click="moveToNextTab()"
				ng-disabled="partnerSchoolForm.name.$invalid || partnerSchoolForm.category.$invalid || partnerSchoolForm.formNumber.$invalid 
				|| partnerSchoolForm.line1.$invalid ||partnerSchoolForm.city.$invalid || partnerSchoolForm.state.$invalid  
				|| partnerSchoolForm.dist.$invalid || partnerSchoolForm.taluka.$invalid || partnerSchoolForm.pin.$invalid">Next</md-button>

		</section>

		</md-content> </md-tab> <md-tab label="Exam Detail" ng-click="setCurrentTab(1)"
			ng-disabled="enableTillTabNo<1"> <md-content
			class="md-padding">
		<div layout="row" layout-xs="column">
			<div layout="row" layout-xs="column" flex>
				<h3 class="md-subhead" flex="30">Select Year</h3>
				<!-- 	<span flex="10"></span> -->
				<md-input-container flex="70"> <md-select
					aria-label="YearOfExam" ng-change="getExamByYear(yearOfExam)"
					ng-model="yearOfExam" id="selectedYear"> <md-option
					ng-selected="Year == yearOfExam" ng-value="Year"
					ng-repeat="Year in Years | orderBy:Year">{{Year}}</md-option> </md-select> </md-input-container>
			</div>
			<md-input-container flex> <label>Total
				Number Of Student In School<span style="color: red;">*</span>
			</label> <input type="number" name="totalStudent" aria-label="totalStudent"
				id="totalStudent" ng-model="examDetail.totalStudent"
				ng-required="true" focus-on="!selectedPSchoolId && selectedIndex==1">
			<div ng-messages="partnerSchoolForm.totalStudent.$error"
				ng-if="partnerSchoolForm.totalStudent.$submitted || partnerSchoolForm.totalStudent.$touched">
				<div ng-message="required">Please Enter Total Number Of
					Student.</div>
			</div>
			</md-input-container>
		</div>
		<div layout="row" layout-xs="column">
			<h3 class="md-subhead">Enter Exam Appeared Student Male and
				Female</h3>
		</div>
		<div layout="row" layout-xs="column" flex>

			<md-input-container flex> <label>Male <span
				style="color: red;">*</span>
			</label> <input type="number" name="male" id="male" aria-label="male"
				ng-model="examDetail.male" ng-change="calculateTotal()"
				ng-required="true">
			<div ng-messages="partnerSchoolForm.male.$error"
				ng-if="partnerSchoolForm.male.$submitted || partnerSchoolForm.male.$touched">
				<div ng-message="required">Please Enter Male Number Of
					Student.</div>
			</div>
			</md-input-container>
			<!-- 	<span flex="20"></span> -->
			<md-input-container flex> <label>Female<span
				style="color: red;">*</span>
			</label> <input type="number" name="female" aria-label="female" id="female"
				ng-model="examDetail.female" ng-change="calculateTotal()"
				ng-required="true">
			<div ng-messages="partnerSchoolForm.female.$error"
				ng-if="partnerSchoolForm.female.$submitted || partnerSchoolForm.female.$touched">
				<div ng-message="required">Please Enter female Number Of
					Student.</div>
			</div>
			</md-input-container>
			<!-- <span flex="10"></span> -->
			<!-- <md-input-container flex> Total= <b>{{examDetail.total}} -->
			</b>
			</md-input-container>
		</div>
		<div layout="row" layout-xs="column">

			<!-- <h3 class="md-subhead" flex="20">Select Exam Medium</h3>
		<span flex="10"></span>
		<md-input-container flex>
		<div ng-repeat="item in languages">
			<md-checkbox ng-checked="exists(item, selected)"
				ng-click="toggle(item, selected)"> {{ item }} <span
				ng-if="exists(item, selected)"> <md-icon
					md-svg-src="img/icons/ic_done_black_24px.svg"></md-icon></span> </md-checkbox>
		</div>
		</md-input-container> -->


			<h3 class="md-subhead">Mode Of Exam OnLine / OffLine</h3>
			<!-- 	<span flex="10"></span> -->
			<md-input-container flex> <md-radio-group
				ng-model="examDetail.modeOfExam"> <md-radio-button
				value="OffLine" class="md-primary">OffLine</md-radio-button> <md-radio-button
				value="OnLine" class="md-primary"> OnLine </md-radio-button> </md-radio-group> </md-input-container>

			<h3 class="md-subhead">Books Required OnLine / OffLine</h3>
			<!-- 	<span flex="10"></span> -->
			<md-input-container flex> <md-radio-group
				ng-model="examDetail.bookRequired"> <md-radio-button
				value="OffLine" class="md-primary">OffLine</md-radio-button> <md-radio-button
				value="OnLine" class="md-primary"> OnLine </md-radio-button> </md-radio-group> </md-input-container>


		</div>

		<section layout="row" layout-sm="column" layout-align="end end">
			<md-button
				ng-disabled="partnerSchoolForm.totalStudent.$invalid || partnerSchoolForm.male.$invalid || partnerSchoolForm.female.$invalid ||!visible"
				class="md-raised md-primary" ng-click="addPartnerSchool()">Save
			& Next</md-button>
			<md-button class="md-raised md-primary" ng-click="moveToNextTab()"
				ng-disabled="partnerSchoolForm.totalStudent.$invalid || partnerSchoolForm.male.$invalid || partnerSchoolForm.female.$invalid ">Next</md-button>
		</section>
		</md-content> </md-tab> <md-tab label="Contact Detail" ng-click="setCurrentTab(2)"
			ng-disabled="enableTillTabNo<2"> <md-content
			class="md-padding">

		<div layout="row" layout-xs="column" flex>
			<md-input-container flex> <label>Name of
				Head Master / Principal <span style="color: red"
				ng-show="partnerSchoolForm.headMasterName.$error.required"
				class="mandatory">*</span>
			</label> <input id="headMasterName" name="headMasterName"
				ng-model="contactDetail.headMasterName" ng-required="true"
				focus-on="!selectedPSchoolId && selectedIndex==2">
			<div ng-messages="partnerSchoolForm.headMasterName.$error"
				ng-if="partnerSchoolForm.headMasterName.$submitted || partnerSchoolForm.headMasterName.$touched">
				<div ng-message="required">Please Enter headMaster Name.</div>
			</div>
			</md-input-container>
			<md-input-container flex> <label>Phone
				No <!-- <span style="color: red"
			ng-show="partnerSchoolForm.headMasterMobile.$error.required"
			class="mandatory">*</span> -->
			</label> <input name="headMasterPhone"
				ng-model="contactDetail.headMasterPhone"> <!-- <div ng-messages="partnerSchoolForm.headMasterMobile.$error"
			ng-if="partnerSchoolForm.headMasterMobile.$submitted || partnerSchoolForm.headMasterMobile.$touched">
			<div ng-message="required">Please Enter Mobile Number.</div>
		</div> --> </md-input-container>
		</div>

		<div layout="row" layout-xs="column" flex>

			<md-input-container flex> <label>Mobile
				No<span style="color: red"
				ng-show="partnerSchoolForm.headMasterMobile.$error.required"
				class="mandatory">*</span>
			</label> <input type="number" name="headMasterMobile"
				ng-model="contactDetail.headMasterMobile" ng-minlength="10"
				ng-maxlength="10">
			<div ng-messages="partnerSchoolForm.headMasterMobile.$error"
				ng-if="partnerSchoolForm.headMasterMobile.$submitted || partnerSchoolForm.headMasterMobile.$touched">
				<div ng-message="required">Please Enter Mobile No.</div>
				<span class="help-block"
					ng-show="((partnerSchoolForm.headMasterMobile.$error.minlength || partnerSchoolForm.headMasterMobile.$error.maxlength) && partnerSchoolForm.headMasterMobile.$dirty) ">Mobile
					Number should be 10 digits</span>
			</div>
			</md-input-container>



			<md-input-container flex> <label>E-mail
				ID <!-- <span style="color: red"
			ng-show="partnerSchoolForm.headMasterEmailId.$error.required"
			class="mandatory">*</span> -->
			</label> <input name="headMasterEmailId" type="email"
				ng-model="contactDetail.headMasterEmailId"> <!-- 		<div ng-messages="partnerSchoolForm.headMasterEmailId.$error"
			ng-if="partnerSchoolForm.headMasterEmailId.$submitted || partnerSchoolForm.headMasterEmailId.$touched">
			<div ng-message="required">Please Enter E-mail ID.</div>
		</div>
 --> </md-input-container>
		</div>
		<div layout="row" layout-xs="column" flex>

			<h3 class="md-subhead">Coordinator Details</h3>
		</div>
		<div layout="row" layout-xs="column" flex>
			<table
				style='width: 90%; border-collapse: collapse; border: 1px solid black;'>
				<thead>
					<tr style='border: 1px solid black; background-color: #44acb6'>
						<th>Sr. No.</th>
						<th>Coordinator Name</th>
						<th>Phone</th>
						<th>Mobile</th>
						<th>Email Id</th>
						<th>Action</th>
					</tr>
				</thead>

				<tbody>
					<tr ng-repeat="co in  contactDetail.coordinatorDetail">
						<td>{{ co.srno }} )&nbsp;&nbsp;</td>
						<td><md-input-container flex> <label>Name
								<span style="color: red"
								ng-show="partnerSchoolForm.cordName.$error.required"
								class="mandatory">*</span>
							</label> <input name="cordName" ng-model="co.coordinatorName"
								ng-required="true">
							<div ng-messages="partnerSchoolForm.cordName.$error"
								ng-if="partnerSchoolForm.cordName.$submitted || partnerSchoolForm.cordName.$touched">
								<div ng-message="required">Please Enter Name.</div>
							</div>
							</md-input-container></td>
						<td><md-input-container flex> <label>Phone
								No.</label> <input ng-model="co.coordinatorPhoneNum"></md-input-container></td>

						<td><md-input-container flex> <label>Mobile
								No<span style="color: red"
								ng-show="partnerSchoolForm.cordMobileNo.$error.required"
								class="mandatory">*</span>
							</label> <input type="number" name="cordMobileNo"
								ng-model="co.coordinatorMobileNum" min="1" ng-minlength="10"
								ng-maxlength="10" ng-required="true">
							<div ng-messages="partnerSchoolForm.cordMobileNo.$error"
								ng-if="partnerSchoolForm.cordMobileNo.$submitted || partnerSchoolForm.cordMobileNo.$touched">
								<div ng-message="required">Please Enter Mobile No.</div>
								<span class="help-block"
									ng-show="((partnerSchoolForm.cordMobileNo.$error.minlength || partnerSchoolForm.cordMobileNo.$error.maxlength) && partnerSchoolForm.cordMobileNo.$dirty) ">Mobile
									Number should be 10 digits</span>
							</div>
							</md-input-container></td>
						<td><md-input-container flex> <label>E-mail
								ID <!-- <span style="color: red"
							ng-show="partnerSchoolForm.cordEmail.$error.required"
							class="mandatory">*</span> -->
							</label> <input name="cordEmail" type="email"
								ng-model="co.coordinatorEmailId"> <!-- 						<div ng-messages="partnerSchoolForm.cordEmail.$error"
							ng-if="partnerSchoolForm.cordEmail.$submitted || partnerSchoolForm.cordEmail.$touched">
							<div ng-message="required">Please Enter E-mail ID.</div>
						</div>
 --> </md-input-container> <!-- 						<md-input-container flex> <label>Email
							Id</label> <input ng-model="co.coordinatorEmailId"></md-input-container> -->
						</td>
						<td><md-icon md-svg-src="img/icons/remove.svg"
								ng-click="removeCoordinator($index)" class="name"
								style="color: Green; height: 30px; width: 20px"></md-icon></td>
					</tr>
				</tbody>
			</table>

		</div>
		<span flex="10"> <md-button class="md-icon-button"
				ng-click="addCoordinator()" layout-align="end end"> <md-tooltip>
			Add Co-ordinator</md-tooltip> <md-icon
				md-svg-icon="img/icons/ic_add_black_24px.svg" aria-label="Add New"></md-icon>
			</md-button>

		</span>

		<section layout="row" layout-sm="column" layout-align="end end">
			<md-button
				ng-disabled="partnerSchoolForm.headMasterName.$invalid || partnerSchoolForm.cordName.$invalid 
				|| partnerSchoolForm.cordMobileNo.$invalid ||!visible"
				class="md-raised md-primary" ng-click="addPartnerSchool()">Save
			& Next</md-button>
			<md-button class="md-raised md-primary" ng-click="moveToNextTab()"
				ng-disabled="partnerSchoolForm.headMasterName.$invalid || partnerSchoolForm.cordName.$invalid 
				|| partnerSchoolForm.cordMobileNo.$invalid">Next</md-button>
		</section>
		</md-content> </md-tab> <!-- 		<md-tab	label="Book Standard Details"> <md-content class="md-padding">

	<md-input-container flex>
		<div ng-repeat="item in books">
			<md-checkbox ng-checked="exists(item, selected)"
				ng-click="toggle(item, selected)"> {{   item.standard }} <span
				ng-if="exists(item, selected)"> <md-icon
					md-svg-src="img/icons/ic_done_black_24px.svg"></md-icon></span> </md-checkbox>
		</div>
		</md-input-container>
	
	
	
	
		</md-content>
		</md-tab> --> <md-tab label="Book Detail" ng-click="setCurrentTab(3)"
			ng-disabled="enableTillTabNo<3"> <md-content
			class="md-padding">
		<div align="right">
			<span class="md-subhead">Download Book Details</span>
			<md-button class="md-icon-button" ng-click="downloadBookDetails()"
				layout-align="end end"
				ng-disabled="!bookSummary.bookDetail[0].standard"> <ng-md-icon
				icon="file_download" style="fill: md-default" size="22">
			<md-tooltip>Download in CSV</md-tooltip></ng-md-icon></md-button>
			<md-button class="md-icon-button" ng-click="downloadBookDetailsPDF()"
				layout-align="end end" ng-disabled="!bookSummary.bookDetail[0].standard"> <ng-md-icon
				icon="print" style="fill: md-default" size="22">
			<md-tooltip>Download in PDF</md-tooltip></ng-md-icon></md-button>
		</div>
		<div>
			<md-data-table-container>
			<table md-data-table>
				<thead>
					<tr>
						<th width=10px name="Select Standard"></th>
						<th width=10px name="Select Book Name"></th>
						<th width=10px name="Total Student"></th>
						<th width=10px name="Exam Fees"></th>
						<th width=10px name="Total Fees"></th>
						<th width=10px name="GRF 80% Fees"></th>
						<th width=10px name="Book Price"></th>
						<th width=10px name="Book Amount"></th>
						<th width=10px name="Remaining Fees"></th>
						<th width=10px name="Action"></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="bb in  bookSummary.bookDetail"
						style="margin: 0; padding-left: 0; padding-right: 5px;">
						<td><md-input-container flex
								style="margin: 0; padding-left: 0; padding-right: 5px;">
							<md-select focus-on="!selectedPSchoolId && selectedIndex==3"
								name="standard" aria-label="Select Standard"
								ng-model="bb.standard"> <md-option
								ng-value="standard" ng-repeat="standard in standardList"
								placeholder="standard">{{standard}}</md-option> </md-select> </md-input-container></td>
						<td><md-input-container flex
								style="margin: 0; padding-left: 0; padding-right: 5px;">
							<md-select ng-model="bb.bookName" placeholder="Select book"
								ng-change="setfees(bb.bookName,$index)"> <md-option
								ng-value="book.id" ng-repeat="book in bookStocks "
								ng-if="book.standard==bb.standard">{{book.bookName}}({{book.bookMedium}})</md-option>
							</md-select> </md-input-container></td>
						<td><md-input-container flex
								style="margin: 0; padding-left: 0; padding-right: 5px;">
							<input type="number" name="totalStud" min="1"
								ng-model="bb.totalStud" aria-label="totalStud"
								ng-change="calculate($index,bb.totalStud)"
								ng-model-options="{ debounce: 1000 }"> </md-input-container></td>
						<td><md-input-container flex
								style="margin: 0; padding-left: 0; padding-right: 5px;">
							<!-- <input
							type="number" ng-model="bb.bookPrise"> --> {{bb.examFees | number
							: 2}}</md-input-container></td>
						<td><md-input-container flex
								style="margin: 0; padding-left: 0; padding-right: 5px;">
							<!-- <input
							type="number" name="totalFees" ng-model="bb.totalFees"> -->
							{{bb.totalExamFees | number : 2}}</md-input-container></td>
						<td><md-input-container flex
								style="margin: 0; padding-left: 0; padding-right: 5px;">
							{{bb.amtForGRF80per | number : 2}}</md-input-container></td>
						<td><md-input-container flex
								style="margin: 0; padding-left: 0; padding-right: 5px;">
							<!-- <input
							type="number" ng-model="bb.bookPrise"> --> {{bb.bookPrise |
							number : 2}}</md-input-container></td>
						<td><md-input-container flex
								style="margin: 0; padding-left: 0; padding-right: 5px;">
							<!-- <input
							type="number" ng-model="bb.bookPrise"> --> {{bb.totalFees |
							number : 2}}</md-input-container></td>
						<td><md-input-container flex
								style="margin: 0; padding-left: 0; padding-right: 5px;">
							<!-- <input
							type="number" ng-model="bb.bookPrise"> --> {{bb.remainingFees |
							number : 2}}</md-input-container></td>
						<td><md-button class="md-icon-button"
								ng-click="removeBook($index)" layout-align="end end">
							<ng-md-icon icon="remove_circle_outline" style="fill: md-default"
								size="22"> <md-tooltip>Remove Book</md-tooltip></ng-md-icon> </md-button></td>
					</tr>
					<tr>
						<td><md-button class="md-icon-button" ng-click="addBook()"
								layout-align="end end"> <ng-md-icon
								icon="add_circle_outline" style="fill: md-default" size="22">
							<md-tooltip>Add Book</md-tooltip></ng-md-icon></md-button></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td><b>Total</b></td>
						<td><b>{{examDetail.total}}</b></td>
						<td></td>
						<td><b>{{bookSummary.total | number : 2}}</b></td>
						<td><b>{{getGrffeestotal() | number : 2}}</b></td>
						<td></td>
						<td><b>{{getTotalbookAmount() | number : 2}}</b></td>
						<td><b>{{getRemainingTotal() | number : 2}}</b></td>
						<td></td>
					</tr>
				</tbody>
			</table>
			</md-data-table-container>
		</div>

		<section layout="row" layout-sm="column" layout-align="end end">
			<md-button
				ng-disabled="partnerSchoolForm.totalStud.$invalid ||!visible"
				class="md-raised md-primary" ng-click="addPartnerSchool()">Save
			</md-button>
		</section>

		</md-content> </md-tab> <md-tab label="Payment Detail" ng-click="setCurrentTab(4)"
			ng-disabled="enableTillTabNo<4"> <md-content
			class="md-padding">
		<div class="md-toolbar-tools">
			<span flex></span>
			<!--<md-card>-->
			<section layout="row">

				<md-button class="md-raised md-primary"
					ng-disabled="!partnerSchool.autoGenerated"
					ui-sref="courierModule.addFromPS({partnerSchool : partnerSchool , yearOfExam : yearOfExam})">Add
				Courier </md-button>

				<md-button class="md-raised md-primary"
					ng-disabled="!partnerSchool.autoGenerated"
					ui-sref="partnerSchool.print({selectedSchoolObj: partnerSchool, bookStocks: bookStocks, yearOfExam : yearOfExam})">Print
				</md-button>
				<md-button class="md-raised md-primary"
					ng-disabled="!partnerSchool.autoGenerated"
					ui-sref="partnerSchool.printAddress({selectedSchoolObj: partnerSchool, yearOfExam : yearOfExam})">Print
				Address </md-button>
			</section>
			<!--</md-card>-->
		</div>

		<section name="Payment Add Section" ng-show="addPaymentFlag">
			<div layout="row" layout-xs="column" flex>
				<md-input-container flex> <md-select
					name="payment" id="payment" ng-model="PaymentDetail.payReceivedBy"
					placeholder="-Select Payment Mode-" ng-required="true">
				<md-option>Cash</md-option> <md-option>D.D </md-option> <md-option>NEFT/RTGS</md-option>
				<md-option>--</md-option> </md-select>
				<div ng-messages="partnerSchoolForm.payment.$error"
					ng-if="partnerSchoolForm.payment.$submitted || partnerSchoolForm.payment.$touched">
					<div ng-message="required">Please Select Payment Mode.</div>
				</div>
				</md-input-container>
				<!-- 	<span flex="20"></span> -->
				<div flex>
					<md-input-container> Date:- </md-input-container>
					<md-datepicker name="paymentDate"
						ng-model="PaymentDetail.paymentDate" md-placeholder="Select Date"></md-datepicker>
				</div>
			</div>
			<br>
			<div layout="row" layout-xs="column" flex>
				<md-input-container flex> <md-select
					name=nameOfBank ng-model="PaymentDetail.nameOfBank"
					placeholder="--Select Bank Name--" ng-required="true">
				<md-option ng-value="bankName" ng-repeat="bankName in bankNameList">{{bankName}}</md-option>
				</md-select>
				<div ng-messages="partnerSchoolForm.nameOfBank.$error"
					ng-if="partnerSchoolForm.nameOfBank.$submitted || partnerSchoolForm.nameOfBank.$touched">
					<div ng-message="required">Please enter Bank Name.</div>
				</div>
				</md-input-container>
				<md-input-container flex ng-if="PaymentDetail.nameOfBank == 'Other'">
				<label>Enter Bank Name<span style="color: red"
					ng-show="partnerSchoolForm.otherNameOfBank.$error.required"
					class="mandatory">*</span>
				</label> <input type="text" name="otherNameOfBank"
					ng-model="tempPaymentData.otherNameOfBank" ng-required="true">
				<div ng-messages="partnerSchoolForm.otherNameOfBank.$error"
					ng-if="partnerSchoolForm.otherNameOfBank.$submitted || partnerSchoolForm.otherNameOfBank.$touched">
					<div ng-message="required">Please enter Bank Name.</div>
				</div>
				</md-input-container>
				<md-input-container flex> <label>Enter
					Branch Name <span style="color: red"
					ng-show="partnerSchoolForm.branchName.$error.required"
					class="mandatory">*</span>
				</label> <input type="text" name="branchName"
					ng-model="PaymentDetail.branchName"><!-- ng-blur="calculatepaidandpending()" -->
				<div ng-messages="partnerSchoolForm.branchName.$error"
					ng-if="partnerSchoolForm.branchName.$submitted || partnerSchoolForm.branchName.$touched">
					<div ng-message="required">Please Enter the Name Of branch.</div>
				</div>
				</md-input-container>

			</div>
			<div layout="row" layout-xs="column" flex>

				<md-input-container flex> <label>Enter
					Transaction/DD/Slip Number<!-- <span style="color: red"
			ng-show="partnerSchoolForm.transactionNumber.$error.required"
			class="mandatory">*</span> -->
				</label> <input type="text" name="transactionNumber"
					ng-model="PaymentDetail.transactionNumber"><!-- ng-blur="calculatepaidandpending()" -->
				<!-- 		<div ng-messages="partnerSchoolForm.transactionNumber.$error"
			ng-if="partnerSchoolForm.transactionNumber.$submitted || partnerSchoolForm.transactionNumber.$touched">
			<div ng-message="required">Please Enter Transaction/DD/Slip
				Number.</div>
		</div>
 --> </md-input-container>
				<div flex>
					<md-input-container>Deposited Date:- </md-input-container>
					<md-datepicker name="depositDate"
						ng-model="PaymentDetail.depositDate" md-placeholder="Select Date"></md-datepicker>
				</div>
				<div ng-hide="curUser.role == 'Teacher'" flex>
					<md-checkbox name="paymentReceived"
						ng-model="PaymentDetail.paymentReceived" style="padding-top: 10px"
						aria-label="Payment is Received"> Payment is
					Received</md-checkbox>
				</div>
			</div>
			<div layout="row" layout-xs="column" flex>
				<md-input-container flex> <label>Enter
					DD Bank Name </label> <input type="text" name="ddBankName"
					ng-model="PaymentDetail.ddBankName"></md-input-container>
				<md-input-container flex> <label>Enter
					DD Branch Name </label> <input type="text" name="ddBranchName"
					ng-model="PaymentDetail.ddBranchName"></md-input-container>
				<div flex>
					<md-input-container>DD Date:- </md-input-container>
					<md-datepicker name="ddCreatedDate"
						ng-model="PaymentDetail.ddCreatedDate"
						md-placeholder="Select Date"></md-datepicker>
				</div>
			</div>
			<br>

			<div layout="row" layout-xs="column" flex>
				<md-input-container flex="30"> <label>Paid
					Fees<span style="color: red"
					ng-show="partnerSchoolForm.payAmount.$error.required"
					class="mandatory">*</span>
				</label> <input type="number" name="payAmount"
					ng-model="PaymentDetail.payAmount" ng-required="true"><!-- ng-blur="calculatepaidandpending()" -->
				<div ng-messages="partnerSchoolForm.payAmount.$error"
					ng-if="partnerSchoolForm.payAmount.$submitted || partnerSchoolForm.payAmount.$touched">
					<div ng-message="required">Please Enter Payment Fees.</div>
				</div>


				</md-input-container>
				<span flex="20"></span>
				<md-input-container flex> <label>Note <span
					style="color: red" ng-show="partnerSchoolForm.note.$error.required"
					class="mandatory">*</span>
				</label> <input type="text" name="note" ng-model="PaymentDetail.note"><!-- ng-blur="calculatepaidandpending()" -->
				<div ng-messages="partnerSchoolForm.note.$error"
					ng-if="partnerSchoolForm.note.$submitted || partnerSchoolForm.note.$touched">
					<div ng-message="required">Please Enter Payment note.</div>
				</div>
				</md-input-container>
			</div>
			<!-- <div layout="row" layout-xs="column" flex>
				<md-input-container flex="20">Total Fees To Be
				Paid = {{bookSummary.amtForGRF80per }} </md-input-container>
				<span flex="10"></span>
				<md-input-container flex="20">Total Paid Fees =
				{{PaymentDetail.tPaid }} </md-input-container>
				<span flex="10"></span>
				<md-input-container flex="20">Pending Fees =
				{{PaymentDetail.pAmount}} </md-input-container>
			</div> -->
			<section layout="row" layout-sm="column" layout-align="end end">
				<md-button
					ng-disabled="partnerSchoolForm.payment.$invalid || partnerSchoolForm.nameOfBank.$invalid 
				|| partnerSchoolForm.payAmount.$invalid"
					class="md-raised md-primary" ng-click="addPartnerSchool()">Save
				</md-button>
			</section>
		</section>

		<section layout="row" layout-sm="column" layout-align="start start"
			name="Payment Add Button" ng-show="!addPaymentFlag">
			<md-button class="md-raised md-primary"
				ng-click="enableAddPaymentFlag()"> Add Payment </md-button>
		</section>

		<div layout="row" layout-xs="column" flex>
			<md-input-container flex="20">Total Fees To Be
			Paid = {{getGrffeestotal() }} </md-input-container>
			<span flex="10"></span>
			<md-input-container flex="20">Total Paid Fees =
			{{PaymentDetail.tPaid }} </md-input-container>
			<span flex="10"></span>
			<md-input-container flex="20">Pending Fees =
			{{PaymentDetail.pAmount}} </md-input-container>
		</div>
		<div>
			<md-data-table-container>
			<table md-data-table>
				<thead>
					<tr>

						<th name="Payment Received Via"></th>
						<th name="Date" order-by="paymentDate"></th>
						<th name="Bank Name"></th>
						<th name="Payment Fees"></th>

						<th name="Pending Fees "></th>
						<th name="Payment Received Status "
							ng-hide="curUser.role == 'Teacher'"></th>
						<th name="Action" ng-hide="curUser.role == 'Teacher'"></th>

					</tr>
				</thead>
				<tbody>
					<tr md-auto-select ng-repeat="pd in PaymentDet track by $index">
						<td
							title=Branch:-{{pd.branchName}}-Transaction/DD/Slip:-{{pd.transactionNumber}}>{{pd.payReceivedBy}}</td>
						<td>{{pd.paymentDate | formatDate}}</td>
						<td>{{pd.nameOfBank}}</td>
						<td>{{pd.payAmount}}</td>
						<td>{{pd.pAmount}}</td>
						<td ng-hide="curUser.role == 'Teacher'">{{pd.paymentReceived}}</td>
						<td ng-hide="curUser.role == 'Teacher'"><md-button
								class="md-icon-button" id="reviewPayment"
								ng-disabled="pd.paymentReceived"
								ng-click="enableAddPaymentFlag(pd)"> <ng-md-icon
								icon="pageview" style="fill: md-default" size="24">
							<md-tooltip>Review Payment</md-tooltip></ng-md-icon></md-button></td>
					</tr>
				</tbody>
			</table>
			</md-data-table-container>
		</div>
		</md-content> </md-tab> <md-tab label="Notification" ng-disabled="enableTillTabNo<5">
		<h3 class="md-subhead text-primary" style="text-align: center;">SMS
			Records</h3>
		<md-content class="md-padding"> <!-- <table
				style="font-family: arial, sans-serif; border-collapse: collapse; border: 1px solid black; width: 80%; margin-left: 20px;">
				<tr
					style="border: 1px solid #8cced4; text-align: left; padding: 8px; background-color: #44acb6;">
					<th>Notification Type</th>
					<th>No. of Notifications</th>
				</tr>
				<tr
					style="border: 1px solid #dddddd; text-align: left; padding: 8px; background-color: #8cced4;">
					<td>Registration SMS Count</td>
					<td ng-bind="examDetail.notificationData.registrationSmsSent"></td>
				</tr>
				<tr
					style="border: 1px solid #dddddd; text-align: left; padding: 8px; background-color: #8cced4;">
					<td>Courier SMS Count</td>
					<td ng-bind="examDetail.notificationData.currierSmsSent"></td>
				</tr>
			</table> --> <!-- <h3 class="md-subhead">SMS Records</h3> --> <md-data-table-container>
		<table md-data-table class="md-primary" md-progress="deferred">
			<thead md-order="query.order" md-trigger="onorderchange">
				<tr>
					<th width="18%" order-by="smsdate" name="Date And Time"></th>
					<th width="18%" order-by="mobileno" name="Mobile no."></th>
					<th width="45%" order-by="smsmessage" name="SMS Message"></th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="smsRecord in smsRecordList | orderBy: query.order">
					<td>{{smsRecord.smsdate | formatFullDate}}</td>
					<td>{{smsRecord.mobileno}}</td>
					<td>{{smsRecord.smsmessage}}</td>
				</tr>
			</tbody>
		</table>
		</md-data-table-container> </md-content> </md-tab> </md-tabs> </md-content>
	</form>
</div>
