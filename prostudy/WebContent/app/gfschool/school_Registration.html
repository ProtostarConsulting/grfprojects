<div ng-if="loading">
	<div layout="row" layout-sm="column" layout-align="space-around">
		<md-progress-circular md-diameter="100" md-mode="indeterminate"></md-progress-circular>
	</div>
</div>
<div ng-if="!loading">
	<div layout="column">
		<h3 class="md-headline">Register School</h3>
		<form name="partnerSchoolForm">
			<md-content class="md-padding">
			<div layout="column" layout-xs="column">
				<div layout="row" layout-xs="column" flex>
					<!-- <span flex="10"></span> -->
					<md-input-container flex><!-- ng-show="selectedPSchoolId" -->
					<label> GRF Reg.No.</label> <input name="name"
						ng-model="partnerSchool.autoGenerated" disabled> </md-input-container>
					<!-- 	<span flex="20" ng-show="selectedPSchoolId"></span> -->

					<md-input-container flex> <label>Enter
						Govt.Reg.No<!-- <span style="color: red"
				ng-show="partnerSchoolForm.govRegisterno.$error.required"
				class="mandatory">*</span> -->
					</label> <input name="govRegisterno" ng-model="partnerSchool.govRegisterno"
						focus-on="!selectedPSchoolId && selectedIndex==0"> </md-input-container>
				</div>
				<div layout="row" layout-xs="column" flex>
					<md-input-container flex> <label>School/College
						Name<span style="color: red"
						ng-show="partnerSchoolForm.name.$error.required" class="mandatory">*</span>
					</label> <input name="name" ng-model="partnerSchool.schoolName"
						ng-required="true">
					<div ng-messages="partnerSchoolForm.name.$error"
						ng-if="partnerSchoolForm.name.$submitted || partnerSchoolForm.name.$touched">
						<div ng-message="required">Please Enter Institute Name.</div>
					</div>
					</md-input-container>

					<!-- <md-input-container flex> <label>Institute
					Name </label> <input name="instName" ng-model="partnerSchool.instName"></md-input-container> -->
					<md-input-container flex> <label>Institute
						Name</label> <md-select name="schoolInstitute" id="schoolInstitute"
						ng-model="partnerSchool.schoolInstitute"> <md-option
						ng-value="tempInstitute"
						ng-selected="partnerSchool.schoolInstitute.id == tempInstitute.id"
						ng-repeat="tempInstitute in tempInstituteList">{{tempInstitute.instituteName}}</md-option>
					</md-select> </md-input-container>

				</div>

				<div layout="row" layout-xs="column" flex>

					<md-input-container flex> <label>Category<span
						style="color: red"
						ng-show="partnerSchoolForm.category.$error.required"
						class="mandatory">*</span></label> <md-select name="category"
						id="category" ng-model="partnerSchool.category" ng-required="true">
					<md-option ng-value="category"
						ng-repeat="category in partnerSchoolLevels">{{category}}</md-option>
					</md-select>
					<div ng-messages="partnerSchoolForm.category.$error"
						ng-if="partnerSchoolForm.category.$submitted || partnerSchoolForm.category.$touched">
						<div ng-message="required">Please Select Category.</div>
					</div>
					</md-input-container>

					<md-input-container flex> <label> Form
						Number <span style="color: red"
						ng-show="partnerSchoolForm.formNumber.$error.required"
						class="mandatory">*</span>
					</label> <input type="number" name="formNumber"
						ng-model="partnerSchool.formNumber"
						unique-grf-form-number="{{partnerSchool.id}}" minlength="4">
					<div ng-messages="partnerSchoolForm.formNumber.$error"
						ng-if="partnerSchoolForm.formNumber.$submitted || partnerSchoolForm.formNumber.$touched">
						<div ng-message="uniqueGRFFormNumber">This form number
							already entered. Please check existing records.</div>
						<span ng-message="minlength">Minimum length should be 4
							digits.</span>
						<div ng-if="profileForm.favoriteNumber.$pending">
							     Calculating....</div>
					</div>
					</md-input-container>

				</div>

				<div layout="row" layout-xs="column" layout-align="left left" flex>
					<span flex="10"></span>
					<h3 class="md-subhead">Address</h3>
				</div>
				<div layout="row" layout-xs="column">
					<md-input-container flex> <label>Line1
					</label> <input name="line1" id="line1"
						ng-model="partnerSchool.address.line1"> </md-input-container>
					<md-input-container flex> <label>Line2
					</label> <input name="line2" id="line2"
						ng-model="partnerSchool.address.line2"></md-input-container>
				</div>

				<div layout="row" layout-xs="column">
					<md-input-container flex> <label>At
						Post/City </label> <input name="city" id="city"
						ng-model="partnerSchool.address.city"> </md-input-container>

					<md-input-container flex> <label>State</label>
					<md-select name="state" ng-model="partnerSchool.address.state"
						ng-change="getDistricts($index, partnerSchool.address.state)">
					<md-option ng-value="states.name"
						ng-repeat="states in Country.states |  orderBy : states.name">{{states.name}}</md-option>
					</md-select> </md-input-container>
				</div>

				<div layout="row" layout-xs="column"
					ng-if="partnerSchool.address.state == 'Other'">
					<md-input-container flex> <label>State
					</label> <input name="otherState" id="otherState"
						ng-model="partnerSchool.address.otherState"> </md-input-container>

					<md-input-container flex> <label>District
					</label> <input name="otherDist" id="otherDist"
						ng-model="partnerSchool.address.otherDist"> </md-input-container>
				</div>
				<div layout="row" layout-xs="column"
					ng-if="partnerSchool.address.state == 'Other'">
					<md-input-container flex> <label>Taluka
					</label> <input name="otherTaluka" id="otherTaluka"
						ng-model="partnerSchool.address.otherTaluka"> </md-input-container>


					<md-input-container flex="50"> <label>Pin
					</label> <input type="number" name="pin" id="pin"
						ng-model="partnerSchool.address.pin"> </md-input-container>

				</div>


				<div layout="row" layout-xs="column"
					ng-if="partnerSchool.address.state != 'Other'">
					<md-input-container flex> <label>District</label>
					<md-select name="district" ng-model="partnerSchool.address.dist"
						ng-change="getTalukas($index, partnerSchool.address.dist)">
					<md-option ng-value="district.name"
						ng-repeat="district in temp.tempDistricts">{{district.name
					}}</md-option> </md-select> </md-input-container>

					<md-input-container flex> <label>Taluka</label>
					<md-select name="taluka" ng-model="partnerSchool.address.tal"
						ng-change="getVillages($Index, partnerSchool.address.tal)">
					<md-option ng-value="taluka.name"
						ng-repeat="taluka in temp.tempTalukas">{{taluka.name
					}}</md-option> </md-select> </md-input-container>
				</div>


				<div layout="row" layout-xs="column">
					<md-input-container flex="50"
						ng-if="partnerSchool.address.state != 'Other'">
					<label>Pin</label> <input type="number" name="pin" id="pin"
						ng-model="partnerSchool.address.pin"> </md-input-container>
				</div>
			</div>
			<section layout="row" layout-sm="column" layout-align="center center">
				<md-button class="md-raised md-primary"
					ng-click="addPartnerSchool()"
					ng-disabled="partnerSchoolForm.name.$invalid || partnerSchoolForm.category.$invalid || partnerSchoolForm.formNumber.$invalid">Save
				</md-button>
			</section>
			</md-content>
		</form>
	</div>
</div>