<div ng-if="loading">
	<div layout="row" layout-sm="column" layout-align="space-around">
		<md-progress-circular md-diameter="100" md-mode="indeterminate"></md-progress-circular>
	</div>
</div>
<div ng-if="!loading">
	<md-content layout-padding>
	<form name="finSummaryForm" ng-show="filterType == ''">
		<div class="md-headline">
			<h3>Financial Summary</h3>
		</div>
		<!-- Payment Summary By Mode -->
		<table
			style="font-family: arial, sans-serif; border-collapse: collapse; width: 60%;">
			<caption
				style="border: 1px solid #dddddd; text-align: center; font-size: 18px; padding: 2px;">
				<span flex>Payment Summary By Mode</span>
			</caption>
			<tr>
				<th ng-style="getTHStyle()">Sr. No.</th>
				<th ng-style="getTHStyle()">Type of Mode</th>
				<th ng-style="getTHStyle()">No. of Payments</th>
				<th ng-style="getTHStyle()">Amount(Rs.)</th>
				<th ng-style="getTHStyle()">Action</th>
			</tr>
			<tr ng-repeat="payMode in finSummayReportData.paymentModesData" ng-style="getRowStyle($even)">
				<td style="border: 1px solid black; padding: 5px;">{{$index +
					1}}</td>
				<td style="border: 1px solid black; padding: 5px;">{{payMode.paymentMode}}</td>
				<td
					style="border: 1px solid black; padding: 5px; text-align: right;">{{payMode.noOfPayments}}</td>
				<td
					style="border: 1px solid black; padding: 5px; text-align: right;">{{payMode.amount
					| currency:""}}</td>
				<td style="border: 1px solid black; padding-left: 15px;"><md-button
						class="md-primary" ng-click="filterBy('school', payMode.paymentMode)">Details
					</md-button></td>
			</tr>
			<tr>
				<td
					style="border: 1px solid black; text-align: center; font-size: 16px;"
					colspan='2'><b>Total</b></td>
				<td
					style="border: 1px solid black; text-align: right; font-size: 16px;"><b>{{noOfPaymentsTotal}}</b></td>
				<td
					style="border: 1px solid black; text-align: right; font-size: 16px;"><b>{{finSummayReportData.amountPaymentsTotal
						| currency:""}}</b></td>
				<td
					style="border: 1px solid black; text-align: center; font-size: 14px;"></td>
			</tr>
		</table>

		<!-- Courier Summary By Logistics -->
		<br>
		<hr>
		<br>
		<table
			style="font-family: arial, sans-serif; border-collapse: collapse; width: 60%;">
			<caption
				style="border: 1px solid #dddddd; text-align: center; font-size: 18px; padding: 2px;">
				<span flex>Courier Summary By Logistics</span>
			</caption>
			<tr>
				<th ng-style="getTHStyle()">Sr. No.</th>
				<th ng-style="getTHStyle()">Logistic</th>
				<th ng-style="getTHStyle()">No. of Parcels</th>
				<th ng-style="getTHStyle()">Charges(Rs.)</th>
				<th ng-style="getTHStyle()">Action</th>
			</tr>
			<tr ng-repeat="logisticsData in finSummayReportData.logisticsWiseData"
				ng-style="getRowStyle($even)">
				<td style="border: 1px solid black; padding: 5px;">{{$index +
					1}}</td>
				<td style="border: 1px solid black; padding: 5px;">{{logisticsData.logistic}}</td>
				<td
					style="border: 1px solid black; padding: 5px; text-align: right;">{{logisticsData.noOfParcels}}</td>
				<td
					style="border: 1px solid black; padding: 5px; text-align: right;">{{logisticsData.charges
					| currency:""}}</td>
				<td style="border: 1px solid black; padding-left: 15px;"><md-button
						class="md-primary"
						ng-click="filterBy('courier', logisticsData.logistic) ">Details
					</md-button></td>
			</tr>
			<tr>
				<td
					style="border: 1px solid black; text-align: center; font-size: 16px;"
					colspan='2'><b>Total</b></td>
				<td
					style="border: 1px solid black; text-align: right; font-size: 16px;"><b>{{noOfCourierParcelsTotal}}</b></td>
				<td
					style="border: 1px solid black; text-align: right; font-size: 16px;"><b>{{finSummayReportData.chargesCourierTotal
						| currency:""}}</b></td>
				<td
					style="border: 1px solid black; text-align: center; font-size: 14px;"></td>
			</tr>
		</table>

	</form>

	<form name="finSummaryForm" ng-show="filterType == 'school'" >
		<span><md-button class="md-primary"
				ng-click="clearfilterValues()">Back to Financial Summary
			</md-button></span>
		<table
			style="font-family: arial, sans-serif; border-collapse: collapse; width: 100%;">
			<caption
				style="border: 1px solid #dddddd; text-align: center; font-size: 18px; padding: 2px;">
				<span flex>Payment Summary By: {{filterPaymentType}}</span>
			</caption>
			<tr>
				<th ng-style="getTHStyle()">Sr. No.</th>
				<th ng-style="getTHStyle()">Reg. No.</th>
				<th ng-style="getTHStyle()">School Name</th>
				<th ng-style="getTHStyle()">Address</th>
				<!-- <th ng-style="getTHStyle()">Payment Type</th> -->
				<th ng-style="getTHStyle()">Payment Date</th>
				<th ng-style="getTHStyle()">Amount(Rs.)</th>
			</tr>
			<tr ng-repeat="school in fitlteredSchoolList | orderBy: 'autoGenerated'"
				ng-style="getRowStyle($even)">
				<td style="border: 1px solid black; padding: 2px;">{{$index +
					1}}</td>
				<td style="border: 1px solid black; padding: 2px;">{{school.autoGenerated}}</td>
				<td style="border: 1px solid black; padding: 2px;">{{school.schoolName}}</td>
				<td style="border: 1px solid black; text-align: left; padding: 2px;">{{school.address.tal
					+ ', ' + school.address.dist}}</td>
				<!-- <td style="border: 1px solid black; padding: 5px; text-align: left;">{{getPaymentDetailListByCurrentYear(school)[0].payReceivedBy}}</td> -->
				<td style="border: 1px solid black; padding: 2px; text-align: left;">{{school.paymentDetailCal.paymentDate
					| date:"dd-MM-yyyy"}}</td>
				<td
					style="border: 1px solid black; padding: 2px; text-align: right;">{{school.paymentDetailCal.payTotal
					| currency:""}}</td>

			</tr>
			<tr>
				<td
					style="border: 1px solid black; text-align: center; font-size: 16px;"
					colspan='5'><b>Total</b></td>
				<td
					style="border: 1px solid black; text-align: right; font-size: 16px;"><b>{{t_addTotalAmountByPaymentType()
						| currency:""}}</b></td>
			</tr>
		</table>
		<div layout="row" layout-align="center center" layout-xs="column" ng-show="displayButton">
				<md-button class="md-raised md-primary" id="downloadExcel" 
					ng-click="downloadSummaryReport()">Download CSV Data <md-tooltip>Download CSV Data</md-tooltip> 
					</md-button>
			</div>
	</form>

	<form name="finSummaryForm" ng-show="filterType == 'courier'">
		<span><md-button class="md-primary"
				ng-click="clearfilterValues()">Back to Financial Summary
			</md-button></span>
		<table
			style="font-family: arial, sans-serif; border-collapse: collapse; width: 100%;">
			<caption
				style="border: 1px solid #dddddd; text-align: center; font-size: 18px; padding: 2px;">
				<span flex>Courier Summary By: {{filterLogisticsType}}</span>
			</caption>
			<tr>
				<th ng-style="getTHStyle()">Sr. No.</th>
				<th ng-style="getTHStyle()">Reg. No.</th>
				<th ng-style="getTHStyle()">School Name</th>
				<th ng-style="getTHStyle()">Address</th>
				<!-- <th ng-style="getTHStyle()">Logistics Type</th> -->
				<th ng-style="getTHStyle()">Dispatch Date</th>
				<th ng-style="getTHStyle()">Amount(Rs.)</th>
			</tr>
			<tr ng-repeat="courier in fitlteredCourierList | orderBy: 'schoolName.autoGenerated'"
				ng-style="getRowStyle($even)">
				<td style="border: 1px solid black; padding: 2px;">{{$index +
					1}}</td>
				<td style="border: 1px solid black; text-align: left; padding: 2px;">{{courier.schoolName.autoGenerated}}</td>
				<td style="border: 1px solid black; text-align: left; padding: 2px;">{{courier.schoolName.schoolName}}</td>
				<td style="border: 1px solid black; text-align: left; padding: 2px;">{{courier.schoolName.address.tal
					+ ', ' + courier.schoolName.address.dist}}</td>
				<!-- <td style="border: 1px solid black; padding: 2px; text-align: left;">{{courier.logistics}}</td> -->
				<td style="border: 1px solid black; text-align: left; padding: 2px;">{{courier.courierDispatchDate
					| date:"dd-MM-yyyy"}}</td>
				<td
					style="border: 1px solid black; padding: 2px; text-align: right;">{{parseFloat(courier.courierCost)
					| number:2}}</td>
			</tr>
			<tr>
				<td
					style="border: 1px solid black; text-align: center; font-size: 16px;"
					colspan='5'><b>Total</b></td>
				<td
					style="border: 1px solid black; text-align: right; font-size: 16px;"><b>{{t_addTotalCostByLogisticType()
						| currency:""}}</b></td>
			</tr>
		</table>
		<div layout="row" layout-align="center center" layout-xs="column" ng-show="displayButton">
				<md-button class="md-raised md-primary" id="downloadExcel" 
					ng-click="downloadSummaryReport()">Download CSV Data <md-tooltip>Download CSV Data</md-tooltip> 
					</md-button>
			</div>
	</form>
		
	</md-content>
</div>
